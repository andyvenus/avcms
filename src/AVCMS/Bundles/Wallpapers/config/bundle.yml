name: Wallpapers
namespace: AVCMS\Bundles\Wallpapers
require:
    - Framework

services:
    - WallpaperServices

assets:
  avcms_wallpapers_admin.js:
    env: admin
    priority: 50
  avcms_wallpapers_frontend.js:
    env: frontend

user_settings_sections:
  wallpapers: Wallpapers

user_settings:
  show_higher_resolutions:
    type: checkbox
    label: Show resolutions higher than the source image
    help: If turned on, all resolutions will be displayed for all wallpapers
    section: wallpapers
    default: false
  browse_wallpaper_columns:
    type: select
    label: Browse Wallpaper Columns
    help: How many columns of wallpapers to show when in the main browse wallpapers pages
    section: wallpapers
    choices:
      1: 1
      2: 2
      3: 3
      4: 4
    choices_translate: false
    default: 2
  browse_wallpapers_per_page:
    type: text
    label: Wallpapers Per Page
    help: How many wallpapers to show when in the main browse wallpapers pages
    section: wallpapers
    default: 12
    validation:
      numeric:
        rule: Numeric
  wallpaper_image_manipulation_library:
    type: select
    label: Image Library
    help: The underlying image manipulation library that should be used
    section: wallpapers
    default: Gd
    choices:
      Gd: Gd
      Imagick: Imagick
  wallpaper_image_cache_limit:
    type: select
    label: Image cache limit
    help: Limit the number of wallpaper resolutions that are cached before they are cleared. Only enable if you are running out of disk space.
    section: wallpapers
    default: 0
    choices_translate: false
    choices:
      0: No limit
      1: 1
      2: 2
      3: 3
      4: 4
      5: 5
      8: 8
      10: 10
  wallpapers_allow_uploads:
    type: checkbox
    label: Allow Wallpaper Submissions
    help: Allow users to submit wallpapers to your site for admins to review
    section: wallpapers
    default: 1
  wallpapers_max_submissions:
    type: text
    label: Maximum User Submissions
    help: The maximum amount of wallpapers a user can submit for review. They can submit more after an admin has accepted their existing submissions.
    section: wallpapers
    default: 10
    validation:
      numeric:
        rule: Numeric

menu_items:
    admin:
        wallpapers_admin:
            label: Wallpapers
            icon: glyphicon glyphicon-picture
            type: route
            default_order: 2
            settings:
              route: wallpapers_admin_home
        wallpapers_bulk_admin:
          label: Bulk Import
          icon: glyphicon glyphicon-import
          type: route
          parent: wallpapers_admin
          settings:
            route: wallpaper_bulk_import_admin_home
        wallpapers_categories_admin:
          label: Categories
          icon: glyphicon glyphicon-th-list
          type: route
          parent: wallpapers_admin
          settings:
            route: wallpapers_manage_categories
        wallpapers_resolutions_admin:
          label: Resolutions
          icon: glyphicon glyphicon-fullscreen
          type: route
          parent: wallpapers_admin
          settings:
            route: wallpapers_manage_resolutions
        wallpaper_submissions_admin:
          label: Submissions
          icon: glyphicon glyphicon-inbox
          type: route
          parent: wallpapers_admin
          settings:
            route: wallpaper_submissions_admin_home

categories:
    wallpaper:
        model: AVCMS\Bundles\Wallpapers\Model\WallpaperCategories
        content_model: AVCMS\Bundles\Wallpapers\Model\Wallpapers
        browser_template: @Wallpapers/admin/wallpapers_browser.twig
        route_prefix: wallpapers_

frontend_search:
  wallpapers:
    name: Wallpapers
    route: browse_wallpapers

comments:
  wallpaper:
    name: Wallpaper
    model: AVCMS\Bundles\Wallpapers\Model\Wallpapers
    title_field: name
    frontend_route: wallpaper_details
    frontend_route_params: [slug]

ratings:
  wallpaper:
    name: Wallpaper
    model: AVCMS\Bundles\Wallpapers\Model\Wallpapers

permissions:
  ADMIN_WALLPAPERS:
    name: Wallpapers Administration
    description: Manage wallpapers in the admin panel
  PERM_SUBMIT_WALLPAPERS:
    name: Submit Wallpapers
    description: Ability for users to submit wallpapers for review by an admin

module_positions:
  wallpapers_home:
    name: Wallpapers Homepage
    description: The content area of the homepage
    environment: frontend
    global_modules: 1
    type: content
  wallpaper_details:
    name: Wallpaper Details Lower
    description: The wallpaper details page, underneath the resolutions
    environment: frontend

modules:
  wallpapers:
    name: Wallpapers
    description: A sortable list of wallpapers
    controller: Wallpapers::WallpaperModulesController::wallpapersListModule
    cachable: true
    cache_bust_model: Wallpapers
    default_cache_time: 3600
    accepted_template_types: [content, panel, list_panel, none]
    user_settings:
      order:
        type: select
        label: Order
        choices:
          publish-date-newest: Newest
          top-hits: Top Hits
          top-downloads: Top Downloads
          liked: Most Liked
        default: newest
      limit:
        type: text
        label: Number of wallpapers to display
        default: 5
      show_date:
        type: checkbox
        label: Show Date
        default: 0
      show_hits:
        type: checkbox
        label: Show Hits
        default: 1
      show_downloads:
        type: checkbox
        label: Show Downloads
        default: 1
      show_category:
        type: checkbox
        label: Show Category
        default: 1
      layout:
        type: select
        label: Layout
        choices:
          list: List
          thumbnails: Thumbnails
        default: list
      columns:
        type: select
        label: Number of columns (thumbnail layout)
        default: 1
        choices:
          1: 1
          2: 2
          3: 3
          4: 4
      filter:
        type: select
        label: Filter
        default: none
        choices:
          none: None
          featured: Featured
  liked_wallpapers:
    name: Liked Wallpapers
    description: A list of a user's liked wallpapers
    controller: Wallpapers::WallpaperModulesController::likedWallpapersModule
    cachable: true
    default_cache_time: 0
    accepted_template_types: [panel, list_panel, none]
    type: user
    user_settings:
      limit:
        type: text
        label: Number of wallpapers to display
        default: 5
      show_date:
        type: checkbox
        label: Show Date
        default: 0
      show_hits:
        type: checkbox
        label: Show Hits
        default: 1
      show_downloads:
        type: checkbox
        label: Show Downloads
        default: 1
      layout:
        type: select
        label: Layout
        choices:
          list: List
          thumbnails: Thumbnails
        default: list
      columns:
        type: select
        label: Number of columns (thumbnail layout)
        default: 1
        choices:
          1: 1
          2: 2
          3: 3
          4: 4
  wallpaper_tags:
      name: Wallpaper Tag Cloud
      description: A tag cloud for wallpapers
      controller: Wallpapers::WallpaperModulesController::tagsModule
      cachable: true
      default_cache_time: 43200
      accepted_template_types: [content, panel, none]
      user_settings:
        limit:
          type: text
          label: Number of tags to display
          default: 40
  wallpaper_resolutions:
      name: Wallpaper Resolutions
      description: A list of all wallpaper resolutions linked to pages to browse them
      controller: Wallpapers::WallpaperModulesController::resolutionsModule
      cachable: true
      default_cache_time: 43200
      accepted_template_types: [panel, none]

config:
    wallpapers_dir: webmaster/wallpapers
    web_dir: wallpapers
