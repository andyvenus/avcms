{% extends 'index.twig' %}

{% block title %}
    {% if category %}
        {{ category.name }}
    {% elseif finder_request.tags %}
        {% trans with {tags: finder_request.tags|replace({'|': ', '})} %}Wallpapers tagged with: {tags}{% endtrans %}
    {% elseif page_type == 'featured' %}
        {% trans %}Featured Wallpapers{% endtrans %}
    {% else %}
        {% trans %}Browse Wallpapers{% endtrans %}
    {% endif %}

    {% if current_page > 1 %}
        - {% trans with {page: current_page} %}Page {page}{% endtrans %}
    {% endif %}
{% endblock %}

{% block meta_description -%}
    {%- if category and current_page == 1 -%}
        {{ category.description }}
    {%- endif -%}
{%- endblock %}

{% block content %}
    <h2>
        {% if category.parent %}<a href="{{ path('wallpaper_category', {'category': category.parent.slug}) }}">{{ category.parent.name }}</a> / {% endif %}
        {{ block('title') }}
    </h2>

    {% if category.subcategories %}
        <div class="box">
            {% trans %}Subcategories{% endtrans %}:<br/>
            {% for subcategory in category.subcategories %}
                <a href="{{ path('wallpaper_category', {'category': subcategory.slug}) }}" class="btn btn-default btn-sm">{{ subcategory.name }}</a>
            {% endfor %}
        </div>
    {% endif %}

    <div class="box">
        {{ form(filters_form, {}, '@Form/bootstrap_inline_form.twig') }}
    </div>

    <div class="row">
    {% for wallpaper in wallpapers %}
        <div class="col-sm-6">
            <a class="thumbnail clearfix" href="{{ url('wallpaper_details', {slug: wallpaper.slug}) }}">
                <img src="{{ wp_thumbnail_url(wallpaper) }}" width="100%"/>
                <div class="pull-left">
                    {{ wallpaper.name }}
                </div>
                <div class="pull-right">
                    <span class="glyphicon glyphicon-eye-open"></span> {{ wallpaper.hits }}&nbsp;
                    <span class="glyphicon glyphicon-download"></span> {{ wallpaper.totalDownloads }}
                </div>
            </a>
        </div>
    {% else %}
        <div class="well well-lg">{% trans %}No Wallpapers Found{% endtrans %}</div>
    {% endfor %}
    </div>

    {% block wallpapers_pagination %}
        {{ pagination(total_pages, current_page) }}
    {% endblock %}
{% endblock %}
